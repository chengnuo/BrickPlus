/*! generator-frontman v0.1.2
*  by fronui team
*  (c) 2014-2016 www.frontpay.cn
* updated on 2016-09-19
*  Licensed under MIT
*/
 !function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?exports.dropdown=e(require("jquery")):t.dropdown=e(t.jQuery)}(this,function(t){return function(t){function e(o){if(i[o])return i[o].exports;var n=i[o]={exports:{},id:o,loaded:!1};return t[o].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}({0:function(t,e,i){t.exports=i(24)},2:function(e,i){e.exports=t},11:function(t,e){"use strict";var i={now:function(){var t=new Date;return t.now?t.now():t.getTime()},throttle:function(t,e,o){var n,r,l,s=null,h=0;o||(o={});var a=function(){h=o.leading===!1?0:i.now(),s=null,l=t.apply(n,r),s||(n=r=null)};return function(){var u=i.now();h||o.leading!==!1||(h=u);var p=e-(u-h);return n=this,r=arguments,p<=0||p>e?(clearTimeout(s),s=null,h=u,l=t.apply(n,r),s||(n=r=null)):s||o.trailling===!1||(s=setTimeout(a,p)),l}},debounce:function(t,e,o){var n,r,l,s,h,a=function u(){var a=i.now()-s;a<e&&a>0?n=setTimeout(u,e-a):(n=null,o||(h=t.apply(l,r),n||(l=r=null)))};return function(){l=this,r=arguments,s=i.now();var u=o&&!n;return n||(n=setTimeout(a,e)),u&&(h=t.apply(l,r),l=r=null),h}}};t.exports={throttle:i.throttle,debounce:i.debounce}},24:function(t,e,i){"use strict";function o(){s(a).filter(".active").removeClass("active").data("currentItem",-1).trigger("hide.ui.dropdown")}function n(t,e){var i=t.parent(),o=t.eq(e).position().top;i.scrollTop(o)}function r(t){var e=[].slice.call(arguments,1);return s(this).each(function(){var i=s(this),o=i.data("ui.dropdown"),n={};o||(n=s.extend({},"object"===("undefined"==typeof t?"undefined":l(t))?t:{},i.data()),i.data("ui.dropdown",o=new d(i,n))),"string"==typeof t&&"toggle"!==t&&o[t].apply(o,e)})}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},s=i(2),h=i(11),a=".form-control-dropdown",u='[data-toggle="dropdown"]',p=function(t,e){this.$el=s(t);var i=this.$el.attr("placeholder");this.$label=s('<label class="form-control-placeholder">'+(i||"请选择")+"</label>"),this.$el.before(this.$label)};p.prototype={toggle:function(){if(this.$el.length&&this.$label.length){var t=""===s.trim(this.$el.val());t?this.show():this.hide()}},show:function(){this.$label.show()},hide:function(){this.$label.hide()}};var d=function c(t,e){this.$el=s(t),this.options=s.extend({},c.DEFAULTS,e),this.$target=this.$el.find(this.options.text),this.$list=this.$el.find(this.options.list),this.$item=this.$list.find(this.options.item),this.$input=this.$el.find(this.options.input),this.Placeholder=new p(this.$input),this.isInput=/input/i.test(this.$target[0].tagName),!!this.options.multiple&&this.$el.addClass("multiple"),this.init(),this._setDefaultValue()};d.VERSION="{{VERSION}}",d.DEFAULTS={text:".form-control-dropdown-value,.form-control,.form-control-modal-value",input:".form-control-dropdown-input",placeholder:"label",list:"> ul",item:"li",multiSelected:".form-control-modal-ops",multiple:!1,separator:",",callback:s.noop,ajax:!1},d.prototype.init=function(){this.$el.on("click.ui.dropdown, focus.ui.dropdown",s.proxy(this.toggle,this)),this.isInput&&this.$target.on("keyup.ui.dropdown",h.throttle(this.filter(this),150)),this.$el.on("click.select.ui.dropdown",this.options.item,this.selected(this)),this.$el.on("click.remove.ui.dropdown",this.options.multiSelected,this.removeMultiItem(this)),this.$target.on("keydown.ui.dropdown",this.keydown(this))},d.prototype._setDefaultValue=function(){var t=this.$input.val()||this.$target.val(),e=this.$item;t&&""!==s.trim(t)&&(t=t.split(this.options.separator),t.forEach(function(t,i){e.filter('[title="'+t+'"]').trigger("click")})),this.Placeholder.toggle()},d.prototype.toggle=function(t){var e=this.$el.hasClass("active");return o(),t&&"undefined"!=typeof t.type?this.$el.toggleClass("active",!e).trigger(e?"hide.ui.dropdown":"show.ui.dropdown"):this.$el.toggleClass("active",t).trigger(t?"show.ui.dropdown":"hide.ui.dropdown"),this._setPosition(),this},d.prototype.filter=function(t){return function(e){var i=s.trim(s(this).val());t.$item.map(function(){var t=s(this).text();t.indexOf(i)>-1?s(this).show():s(this).hide()})}},d.prototype.keydown=function(t){return function(e){if(e.stopPropagation(),27===e.which)return void o();if(/(38|40|27|32|13|46|8)/.test(e.which)){var i=s(this),r=(t.$target,void 0===t.$el.data("currentItem")?-1:t.$el.data("currentItem"));t.show();var l=t.$item.filter(":visible");if(l.length){if(13==e.which&&l.filter(".hover").length)return void l.filter(".hover").trigger("click");var h=l.index(e.target)>-1?l.index(e.target):r;i.is(".disabled, :disabled")||i.is(".optgroup")?(38==e.which&&h>=0&&(h-=2),40==e.which&&h<l.length&&(h+=2),console.log(h)):(38==e.which&&h>=0&&h--,40==e.which&&h<l.length&&h++),h<0&&(h=l.length-1),h>=l.length&&(h=0),n(l,h),t.$el.data("currentItem",h),l.removeClass("hover").eq(h).addClass("hover")}}}},d.prototype.selected=function(t){return function(e){e.stopPropagation();var i=s(this);if(i.is(".disabled"))return e.preventDefault(),!1;t._highlight(i);var o=s.trim(i.attr("title")),n=i.html(),r=i.hasClass("hover");t.setValue(o,n,r),!t.options.multiple&&t.hide();var l=s.Event("selected.ui.dropdown");t.$el.trigger(l,[i,o])}},d.prototype._highlight=function(t){return this.options.multiple?s(t).toggleClass("hover"):s(t).addClass("hover").siblings().removeClass("hover"),this},d.prototype.setValue=function(t,e,i){return this.options.multiple?void this.setMultiValue(t,e,i):(this.$input.length&&this.$input.val(t?t:e),e=e?e.replace(/^(\t|\b|\n)$/,""):"",this.isInput?this.$target.val(t):this.$target.html(e),this.Placeholder.toggle(),this)},d.prototype.setMultiValue=function(t,e,i){this.$input.length||console.warn('必须添加<input type="hidden" name class="form-control-dropdown-input" />');var o=this.$target.find('div[rel="'+t+'"]'),n=this.$input.val(),r=this.options.separator,l=""===s.trim(n)?[]:n.split(r),h=-1;i?(o=s('<div class="form-control-modal-ops" rel="'+t+'">'+e+"</div>"),l.length>0?this.$target.append(o):this.$target.empty().append(o),l.push(t)):(h=s.inArray(t,l),h>-1&&l.splice(h,1),o.detach().remove()),this.$input.val(l.join(r)),this.Placeholder.toggle()},d.prototype.removeMultiItem=function(t){return function(e){e.preventDefault(),e.stopPropagation();var i=s(this).attr("rel"),o=t.$item.filter('[title="'+i+'"]');!!o.length&&t._highlight(o),t.setValue(i,i,!1)}},d.prototype.hide=function(){return this.toggle(!1),this},d.prototype.show=function(){return this.toggle(!0),this},d.prototype._setPosition=function(){var t=this.$el.offset(),e=s(window).scrollTop(),i=s(window).height(),o=this.$el.outerHeight(),n=this.$list.outerHeight(),r={top:"0"},l=!1;return t.top-e+o+n>i?(r.top=-n+"px",l=!0):(r.top=o+"px",l=!1),this.$list.css(r),this.$el.toggleClass("up",l),this},s.fn.dropdown=r,s.fn.dropdown.constructor=d,s(function(){s(a).dropdown(),s(document).on("click.ui.dropdown",a,function(t){r.call(s(this),"toggle",!0),t.stopPropagation()}),s(document).on("focus.ui.dropdown",u,function(t){var e=s(this).parents(a);!!e.length&&t.stopPropagation()&&r.call(e,"toggle",!0)}),s(document).on("click.hide.ui.dropdown",o)})}})});