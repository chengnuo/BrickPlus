/*! generator-frontman v0.1.2
*  by fronui team
*  (c) 2014-2016 www.frontpay.cn
* updated on 2016-07-19
*  Licensed under MIT
*/
 !function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?exports.BrickPlus=e(require("jquery")):t.BrickPlus=e(t.jQuery)}(this,function(t){return function(t){function e(a){if(i[a])return i[a].exports;var n=i[a]={exports:{},id:a,loaded:!1};return t[a].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){function a(){d("."+l).hide().parent().removeClass("active")}function n(t,e){this.$el=d(t),this.options=d.extend({},n.DEAFULTS,e),this.endDate="",this.uuid="C"+Math.random().toString(36).slice(-8)+"_",this.init()}function s(t){return t=t?t:"{}",new Function("return "+t)()}function o(t){var e=[].slice.call(arguments,1);return d(this).each(function(){var i=d(this),a=i.data("datetimepicker"),o=s(i.data("option")),r={};a||(r=d.extend({},o,"object"==typeof t?t:{}),i.data("datetimepicker",a=new n(i,r))),"string"==typeof t&&a[t].apply(a,e)})}function r(t){o.call(this,"show"),t.stopPropagation()}var d=i(1),c=i(2),p='[data-toggle="datetimepicker"]',l="datetimepicker";n.prototype.init=function(){this.periodObj={},this.periodObj.today=0,this.periodObj.yesterday=1,this.periodObj.aRecent7Days=6,this.periodObj.aRecent14Days=13,this.periodObj.aRecent30Days=29,this.render();var t=this.$el.position(),e=this.$el.outerHeight();this.$calendar.css({top:e+"px",left:t.left+"px"}),this.$header=this.$calendar.find(".datetimepicker-header"),this.periodBtns=this.$header.find(".datetimepicker-btn"),this.$body=this.$calendar.find(".datetimepicker-body"),this.$footer=this.$calendar.find(".datetimepicker-footer"),this.$start=this.$footer.find('[data-action="start"]'),this.$end=this.$footer.find('[data-action="end"]'),this.$confirmBtn=this.$footer.find('[data-action="ok"]'),this.$cancelBtn=this.$footer.find('[data-action="cancel"]'),this.options.period||this.$header.hide()&&this.$footer.hide(),this.__setDefaultValue();var i=0,a=this.options.names;for(a.length>2?2:a.length;i<2;i++)this[0===i?"$start":"$end"].prop("name",a[i]);1===this.options.calendars&&this.options.period&&(this.$cancelBtn.hide(),this.periodBtns.eq(1).hide()),this.__listenEvent()},n.prototype.__setDefaultValue=function(){var t,e=this,i=d.trim(e.$el.val()),a=[],n="";""===i?t=n=e.date2ymd(new Date):i.indexOf(e.options.defaultText)>-1?(a=i.split(e.options.defaultText),2===a.length?e.compareStrDate(a[0],a[1])<0?(t=e.formatDate(a[0]),n=e.formatDate(a[1])):(t=e.formatDate(a[1]),n=e.formatDate(a[0])):t=n=e.formatDate(a[0])):t=n=e.formatDate(d.trim(e.$el.val())),e.setValue(t,n)},n.prototype.setValue=function(t,e,i){this.options.period?(i&&(t!==e&&(t=e=i),this.compareStrDate(i,t)<0?t=i:this.compareStrDate(e,i)<0&&(e=i)),this.$el.val([t,this.options.defaultText,e].join("")),this.endDate=e,this.$end.val(e)):(this.$el.val(t),this.$end.val(t),this.endDate=t),this.$start.val(t)},n.prototype.render=function(){var t=this.options.template?this.options.template:n.TEMPLATE.join("");this.$calendar=d(t),this.$el.after(this.$calendar)},n.prototype.renderCalendar=function(){var t,e=0,i=this.options.calendars,a=this.str2date(this.endDate);for(this.$body.empty();e<i;e++)t=this.fillDate(a.getFullYear(),a.getMonth(),e),0===e?this.$body.append(t):this.$body.prepend(t),a.setMonth(a.getMonth()-1,1);this.__addCss(),this.__setPosition()},n.prototype.__addCss=function(){var t=this.$start.val(),e=this.$end.val(),i=this.str2date(t),a=this.str2date(e),n=this.date2ymd,s=this.uuid,o=this.options.period?"selected":"active";this.$body.find("td").removeClass("selected first last active");for(var r=i;r.getTime()<=a.getTime();r.setDate(r.getDate()+1))d("#"+s+n(r)).addClass(o);this.options.period&&(d("#"+s+t).addClass("first"),d("#"+s+e).addClass("last"))},n.prototype.__setPosition=function(){var t=this.$el.offset(),e=d(window).scrollTop(),i=d(window).height(),a=this.$el.outerHeight(),n=this.$calendar[0].offsetHeight;t.top-e-n<0?this.$calendar.css("top",a+"px"):t.top-e+n>=i?this.$calendar.css("top",-n+"px"):this.$calendar.css("top",a+"px")},n.prototype.__listenEvent=function(){var t=this;this.$el.on("focus",d.proxy(this.show,this)),this.$cancelBtn.on("click",d.proxy(this.close,this)),this.$confirmBtn.on("click",d.proxy(this.confirmSelect,this)),this.$calendar.on("click",function(t){return t.stopPropagation(),!1}),this.$el.on("click",function(e){return t.show(),e.stopPropagation(),!1}),this.$calendar.on("click","[data-date]",function(){t.activeDate(this),t.selectDate(d(this).attr("data-date"))}),this.$calendar.on("click","[data-day]",function(){t.selectPeriod(d(this)),t.selectDate(),t.__togglePeriodBtn(d(this))}),this.$calendar.on("click",'[data-action="prevMonth"]',function(){t.tab(-1)}),this.$calendar.on("click",'[data-action="nextMonth"]',function(){t.tab(1)});var e=function(){t.$calendar.find(".datetimepicker-dropdown").removeClass("active")};this.$calendar.on("click",".datetimepicker-dropdown",function(i){var a=d(this).attr("data-type"),n=d(this).attr("data-index");e(),t.dropDown(this,a,n),i.stopPropagation()}),this.$calendar.on("click.hideDropdown",e),this.$calendar.on("click.setDate",".datetimepicker-dropdown li",function(){t.selectYMD(this)}),d(document).on("click.hide.datetimepicker",d.proxy(this.close,this))},n.prototype.selectPeriod=function(t){var e,i=d(t),a=i.attr("data-day");a=this.periodObj[a],e=this.getSpecialPeriod(a),this.$end.val(e.today),this.$start.val(e.otherday),this.endDate=e.today},n.prototype.__togglePeriodBtn=function(t){this.periodBtns.removeClass("active"),t&&d(t).addClass("active")},n.prototype.getSpecialPeriod=function(t){var e=this,i=new Date;1==e.options.isTodayValid&&""!=e.options.isTodayValid||2>t?"":i.setTime(i.getTime()-864e5);var a=i.getTime()-24*t*60*60*1e3<1e3*e.options.minValidDate?1e3*e.options.minValidDate:i.getTime()-24*t*60*60*1e3,n=i.getFullYear()+"-"+c(i.getMonth()+1)+"-"+c(i.getDate());i.setTime(a);var s=i.getFullYear()+"-"+c(i.getMonth()+1)+"-"+c(i.getDate());return t==e.periodObj.aYesterday&&(n=s),{today:n,otherday:s}},n.prototype.checkDateRange=function(t,e){var i,a=this.str2date(t),n=this.str2date(e),s=a.getTime(),o=n.getTime();return i=o>=s?(o-s)/1e3/60/60/24:(s-o)/1e3/60/60/24,!(i>this.options.dayRangeMax)||(alert("最大时间跨度不能大于："+this.options.dayRangeMax),!1)},n.prototype.selectDate=function(t){var e=d.Event("choose.ui.datetimepicker"),i=this.$start.val(),a=this.$end.val();this.options.period&&t?(this.setValue(i,a,t),this.__addCss(),this.__togglePeriodBtn()):(t||(t=i),this.setValue(t,a),this.$el.trigger(e,[t,a]),"function"==typeof this.options.success&&this.options.success(t,a),this.close())},n.prototype.confirmSelect=function(){var t=this,e=this.$start.val(),i=this.$end.val();t.checkDateRange(e,i)||(e=i=t.date2ymd(new Date),this.$start.val(e),this.$end.val(i)),t.selectDate()},n.prototype.activeDate=function(t){this.$calendar.find("td.active").removeClass("active"),d(t).addClass("active")},n.prototype.tab=function(t){var e=this.str2date(this.endDate);e.setMonth(e.getMonth()+t,1),this.endDate=this.date2ymd(e),this.renderCalendar()},n.prototype.show=function(){var t=d.Event("show.ui.datetimepicker");a(),this.renderCalendar(),this.$calendar.show().addClass("active"),this.__setPosition(),this.$el.trigger(t).parent().addClass("active")},n.prototype.close=function(){var t=d.Event("close.ui.datetimepicker");this.$calendar.hide().removeClass("active"),this.endDate=this.$end.val(),this.$el.trigger(t).parent().removeClass("active")},n.prototype.setMaxDate=function(t){this.options.max=this.formatDate(t)||this.options.max},n.prototype.setMinDate=function(t){this.options.min=this.formatDate(t)||this.options.min},n.prototype.setOption=function(t,e){this.options=d.extend({},this.options,t),e&&this.renderCalendar()},n.prototype.dropDown=function(t,e,i){var a=d(t).find("ul"),n=["<ul>","</ul>"],s=(this.str2date(this.endDate),this.options.max.slice(0,4)||(new Date).getFullYear()+3),o=this.str2date(this.options.min).getFullYear(),r=d(t).attr("data-value"),c=1;if(!a.length){if("month"===e)for(;c<=12;c++)n.splice(-1,-1,'<li data-type="m" data-index="'+i+'"'+(c==r?' class="active"':"")+">"+c+"</li>");else for(c=s;c>=o;c--)n.splice(-1,-1,'<li data-type="y" data-index="'+i+'"'+(c==r?' class="active"':"")+">"+c+"</li>");a=d(n.join("")),d(t).append(a)}d(t).addClass("active")},n.prototype.selectYMD=function(t){var e=d(t),i=e.attr("data-type"),a=e.attr("data-index"),n=this.endDate,s=e.text();s=s>9?s:"0"+s,n="y"===i?n.replace(/(\d{1,4})-(\d{1,2})-(\d{1,2})/g,s+"-$2-01"):n.replace(/(\d{1,4})-(\d{1,2})-(\d{1,2})/g,"$1-"+s+"-$2-01"),n=this.str2date(n),"y"===i?n.setDate(n.getMonth()):n.setMonth(0==a?n.getMonth():n.getMonth()+this.options.calendars-1,1),this.endDate=this.date2ymd(n),this.renderCalendar()},n.prototype.fillDate=function(t,e,i){var a=this,n=new Date(t,e,1),s=new Date(t,e,1),o=s.getDay();s.setDate(1-o);var r=new Date(t,e+1,0),c=new Date(t,e+1,0);o=c.getDay(),c.setDate(c.getDate()+6-o);var p=new Date,l=p.getDate(),h=p.getMonth(),u=p.getFullYear(),f=document.createElement("table"),m=document.createElement("caption");d(m).append('<div class="datetimepicker-dropdown" data-type="year" data-index="'+i+'" data-value="'+t+'">'+t+'<i class="icon-chevron-thin-down"></i></div>年<div class="datetimepicker-dropdown" data-type="month" data-index="'+i+'" data-value="'+(e+1)+'">'+(e+1)+'<i class="icon-chevron-thin-down"></i></div>月'),d(f).append(m);for(var y=document.createElement("thead"),v=document.createElement("tr"),g=["日","一","二","三","四","五","六"],D=0,$="";D<7;D++)$+="<th>"+g[D]+"</th>";d(v).html($),d(y).append(v),d(f).append(y),v=document.createElement("tr");var b=document.createElement("td");0==i&&d(b).append('<a href="javascript:void(0);" class="datetimepicker-next-month" data-action="nextMonth"><i class="icon-chevron-thin-right"></i></a>'),i+1==this.options.calendars&&d(b).append('<a href="javascript:void(0);" class="datetimepicker-prev-month" data-action="prevMonth"><i class="icon-chevron-thin-left"></i></a>'),d(b).attr("colSpan",7).css({"text-align":"center",height:"0px"}),d(v).append(b),d(f).append(v);for(var x="",k=0,T="",C=s;C.getTime()<=c.getTime();C.setDate(C.getDate()+1)){if(C.getTime()<n.getTime())x="disabled",k="-1";else if(C.getTime()>r.getTime())x="disabled",k="1";else if(1==this.options.stopToday&&C.getTime()>p.getTime()||C.getTime()<a.str2date(a.options.min)||""!==a.str2date(a.options.max)&&C.getTime()>a.str2date(a.options.max))x="disabled",k="2";else{if(k="0",C.getDate()==l&&C.getMonth()==h&&C.getFullYear()==u?1==this.options.isTodayValid?x="today":(x="disabled",k="2"):x="",!this.options.weekendDis||6!=C.getDay()&&0!=C.getDay()||(x="disabled",k="3"),this.options.disCertainDay&&this.options.disCertainDay.length>0)for(var w in this.options.disCertainDay)isNaN(this.options.disCertainDay[w])||C.getDay()!==this.options.disCertainDay[w]||(x="disabled",k="4");if(this.options.disCertainDate&&this.options.disCertainDate.length>0){var M=!1;for(var w in this.options.disCertainDate)if(!isNaN(this.options.disCertainDate[w])||isNaN(parseInt(this.options.disCertainDate[w])))if(this.options.disCertainDate[0]===!0){if(M=!(C.getDate()===this.options.disCertainDate[w]),!M)break}else if(M=!(C.getDate()!==this.options.disCertainDate[w]))break;M&&(x="disabled",k="4")}}0==C.getDay()&&(v=document.createElement("tr")),b=document.createElement("td"),b.innerHTML=C.getDate(),""!=x&&d(b).attr("class",x),0==k&&(T=a.date2ymd(C),d(b).attr({"data-date":T,id:this.uuid+T}).css("cursor","pointer")),d(v).append(b),6==C.getDay()&&d(f).append(v)}return f},n.prototype.str2date=function(t){var e=t.split("-");return new Date(e[0],e[1]-1,e[2])},n.prototype.compareStrDate=function(t,e){var i=this.str2date(t),a=this.str2date(e);return i.getTime()>a.getTime()?1:i.getTime()==a.getTime()?0:-1},n.prototype.date2ymd=function(t){return[t.getFullYear(),c(t.getMonth()+1),c(t.getDate())].join("-")},n.prototype.formatDate=function(t){return t.replace(/(\d{4})\-(\d{1,2})\-(\d{1,2})/g,function(t,e,i,a){return i<10&&(i="0"+parseInt(i,10)),a<10&&(a="0"+parseInt(a,10)),e+"-"+i+"-"+a})},n.DEAFULTS={period:!1,defaultText:" 至 ",calendars:2,dayRangeMax:366,isTodayValid:!0,min:"1970-01-01",max:"",names:[],stopToday:!1,weekendDis:!1,disCertainDay:[],disCertainDate:[],success:d.noop},n.TEMPLATE=['<div class="'+l+' clearfix">','<div class="'+l+'-header">','<button type="button" class="'+l+'-btn" data-day="today">今天</button>','<button type="button" class="'+l+'-btn" data-day="yesterday">2天</button>','<button type="button" class="'+l+'-btn" data-day="aRecent7Days">7天</button>','<button type="button" class="'+l+'-btn" data-day="aRecent14Days">14天</button>','<button type="button" class="'+l+'-btn" data-day="aRecent30Days">30天</button>',"</div>",'<div class="'+l+'-body clearfix">',"</div>",'<div class="'+l+'-footer clearfix">','<div class="'+l+'-msg">','<div class="form-smaller">','<input type="text" class="form-control" data-action="start" readonly />','<span class="'+l+'-msg-line"> - </span>','<input type="text" class="form-control" data-action="end" readonly /><br />',"</div>","</div>",'<div class="'+l+'-btns">','<button type="button" class="btn primary small-btn" data-action="ok" type="button">确定</button>','<button type="button" class="btn default small-btn" data-action="cancel" type="button">取消</button>',"</div>","</div>","</div>"],d.fn.datetimepicker=o,d.fn.datetimepicker.constructor=n,d(function(){d(document).on("click.datetimepicker",p,r),d(document).on("click.datetimepicker",".form-control-date-btn",function(t){var e=d(this).siblings(p);e.length&&r.call(e,t)})})},function(e,i){e.exports=t},function(t,e){t.exports=function(t){return t>9?t:"0"+t}}])});