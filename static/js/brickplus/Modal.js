/*! generator-frontman v0.1.2
*  by fronui team
*  (c) 2014-2016 www.frontpay.cn
* updated on 2016-09-19
*  Licensed under MIT
*/
 !function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],i):"object"==typeof exports?exports.Modal=i(require("jquery")):t.Modal=i(t.jQuery)}(this,function(t){return function(t){function i(e){if(o[e])return o[e].exports;var n=o[e]={exports:{},id:e,loaded:!1};return t[e].call(n.exports,n,n.exports,i),n.loaded=!0,n.exports}var o={};return i.m=t,i.c=o,i.p="",i(0)}([function(t,i,o){t.exports=o(1)},function(t,i,o){"use strict";function e(t,i){if(!a(this).length&&t&&/^#(\w*)/gi.test(a(this).selector)){var o,e;"string"==typeof t&&(e=t,t={title:"标题",content:""}),t.mid=a(this).selector.replace(/^#/g,"");var r=s.CreateModal(t);r.data("mid",t.mid);var d=a.extend({},s.DEFAULTS,"object"==("undefined"==typeof t?"undefined":n(t))&&t);return r.data("ui.modal",o=new s(r,d)),e&&"function"==typeof o[e]&&o[e](i),t.callback&&t.callback.call(r),o.show(i),a(this)}return a(this).each(function(){var o=a(this),e=o.data("ui.modal"),r=a.extend({},s.DEFAULTS,o.data(),"object"==("undefined"==typeof t?"undefined":n(t))&&t);e||o.data("ui.modal",e=new s(this,r)),"string"==typeof t?e[t](i):r.show&&(r.title&&e.setTitle(r.title),r.content&&e.setContent(r.content),e.show(i))})}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},a=o(2),s=function(t,i){this.$el=a(t),this.options=i,this.$body=a(document.body),this.$dialog=this.$el.find(".modal-wrap"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.options.remote&&this.$el.find(".modal-body").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.ui.modal")},this))};s.VERSION="1.0.0",s.TRANSITION_DURATION=150,s.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},s.TEMPLATE=['<div class="modal-background fade" id="{{mid}}">','<div class="modal-layer">','<div class="modal-position">','<div class="modal-wrap">','<div class="modal-head">','<span class="modal-title">{{title}}</span>','<button class="modal-close">',"<i></i>","</button>","</div>",'<div class="modal-body">',"{{content}}","</div>","</div>","</div>","</div>","</div>"].join(""),s.CreateModal=function(t){var i,o=a(document.body);return t&&"object"==("undefined"==typeof t?"undefined":n(t))&&(i=s.TEMPLATE.replace(/{{(\w*)}}/gi,function(i,o){return t[o]&&"string"==typeof t[o]?/^(\.|#)\w*/gi.test(t[o])?a(t[o]).html():t[o]:t[o]&&t[o].length&&t.length>0?t[o].html():void 0}),i=a(i).hide().appendTo(o)),i},s.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},s.prototype.show=function(t){var i=this,o=a.Event("show.ui.modal",{relatedTarget:t});if(!this.isShown&&!o.isDefaultPrevented()){this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$el.on("click.dismiss.ui.modal",'[data-dismiss="modal"],.modal-close',a.proxy(this.hide,this));var e=a.support.transition&&i.$el.hasClass("fade");i.$el.show().scrollTop(0).attr("tabindex",-1),i.adjustDialog(),e&&i.$el[0].offsetWidth,i.enforceFocus(),e?(i.$el.addClass("in").attr("aria-hidden",!1),i.$dialog.one("uiTransitionEnd",function(){i.$el.trigger("focus").trigger(o)}).emulateTransitionEnd(s.TRANSITION_DURATION)):i.$el.hide().addClass("in").attr("aria-hidden",!1).fadeIn(s.TRANSITION_DURATION,function(){a(this).trigger("focus").trigger(o)}).attr("aria-hidden",!1)}},s.prototype.hide=function(t){t&&t.preventDefault();var i=this;(this.$el.is(":visible")||this.isShown)&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.ui.modal").off("keydown.ui.modal"),this.$el.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.ui.modal").off("mouseup.dismiss.ui.modal"),this.$dialog.off("mousedown.dismiss.ui.modal"),a.support.transition&&this.$el.hasClass("fade")?this.$el.one("uiTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(s.TRANSITION_DURATION):function(){i.$el.fadeOut(s.TRANSITION_DURATION,function(){i.hideModal()})}())},s.prototype.close=function(t){a(t).data("ui.modal").hide()},s.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$el.on("keydown.dismiss.ui.modal",a.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$el.off("keydown.dismiss.ui.modal")},s.prototype.hideModal=function(){var t=this,i=a.Event("hide.ui.modal",{relatedTarget:t.$el});t.$el.hide(),t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$el.trigger(i)},s.prototype.resize=function(){},s.prototype.handleUpdate=function(){this.adjustDialog()},s.prototype.adjustDialog=function(){return},s.prototype.resetAdjustments=function(){this.$el.css({paddingLeft:"",paddingRight:""})},s.prototype.enforceFocus=function(){a(document).off("focusin.ui.modal").on("focusin.ui.modal",a.proxy(function(t){this.$el[0]===t.target||this.$el.has(t.target).length||this.$el.trigger("focus")},this))},s.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var i=document.documentElement.getBoundingClientRect();t=i.right-Math.abs(i.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},s.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},s.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},s.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var i=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),i},s.prototype.setContent=function(t){var i=this.$el.find(".modal-body");i.length&&i.html(t||"")},s.prototype.setTitle=function(t){var i=this.$el.find(".modal-title");i.length&&i.html(t||"")},jQuery.fn.modal=e,jQuery.fn.modal.Constructor=s,jQuery.fn.showLoading=function(t,i){var t=t||"处理中...",i=i||"请不要关闭浏览器，系统正在处理";if(a(this).length)return t&&a(this).find(".modal-body h3").html(t),i&&a(this).find(".loading-content").html(i),a(this).modal("show");var o=['<div class="notice-wrap waiting in-modal">','<div class="notice-box">','<span class="notice-img"></span>',"<h3>"+t+"</h3>",'<div class="loading-content">'+i+"</div>","</div>","</div>"].join("");return a(this).modal({title:"提示",content:o,callback:function(){a(this).find(".modal-close").hide()}})},jQuery.fn.hideLoading=function(){return a(this).length&&a(this).modal("hide")},jQuery.showLoading=function(t,i){var o="#ui-loading";return a(o).showLoading(t,i)},jQuery.hideLoading=function(){var t="#ui-loading";return a(t).hideLoading()},jQuery.fn.modalLayer=function(t){var i,o={icon:"success",title:"成功",content:"",close:!0,buttons:[{text:"确定",href:!1,style:"btn primary",target:!1,ok:a.noop}]},e=a(this);i=a.extend({},o,t);for(var n=['<div class="notice-wrap '+i.icon+' in-modal" role="icon">','<div class="modalLayer notice-box">','<span class="notice-img"></span>','<h3 role="title" class="modalLayer-title '+(""==a.trim(i.content)?"fn-mt-20":"")+'">'+i.title+"</h3>",'<div class="modalLayer-content" role="content">'+i.content+"</div>","</div>","</div>",'<div class="in-modal-btns text-align-center">',"</div>"],s=[],r=i.buttons,d=0;d<r.length;d++)r[d].href?s.push('<a href="'+r[d].href+'" '+(r[d].target?'target="'+r[d].target+'"':"")+' class="'+(r[d].style||"btn primary")+'" data-index="'+d+'">'+r[d].text+"</a>"):s.push('<button type="button" class="'+(r[d].style||"btn primary")+'" data-index="'+d+'">'+r[d].text+"</button>");n.splice(-1,0,s.join("")),e=a(this).modal({title:"提示",content:n.join(""),callback:function(t){a(this).on("click",".in-modal-btns .btn",function(){var t=a(this).data("index"),o=!0;i.buttons.length&&i.buttons[t]&&i.buttons[t].ok&&i.buttons[t].ok&&"function"==typeof i.buttons[t].ok&&(o=i.buttons[t].ok.call(null,a(this),t)!==!1),a(e.selector).data("options",i),o&&a(e.selector).modal("hide")}).on("hide.ui.modal",function(){a(this).remove()}),i.close||a(e.selector).find(".modal-close").hide(),a.isFunction(i.close)&&a(this).on("hide.ui.modal",i.close)}})};var r=function(){var t=a(this),i=a(this).attr("href"),o=a(t.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),n=o.data("ui.modal")?"toggle":a.extend({remote:!/#/.test(i)&&i},o.data(),t.data());e.call(o,n,this)},d=function(){a(document).on("click.ui.modal",'[data-toggle="modal"]',function(t){var i=t.target;a(i).is('[data-toggle="modal"]')&&r.call(i,t)})};a(d);var l=function(){return function(t){var i=t.id?t.id:"#j-modal-status";a(i).modalLayer({icon:"success",title:t.title||"",content:t.content||"",buttons:[{text:"确认",ok:function(){t&&"string"==typeof t.link&&(location.href=t.link),t&&"function"==typeof t.callback&&t.callback()}}]})}}(),c=function(){return function(t){var i=t.id?t.id:"#confirmModalLayer";a(i).modalLayer({icon:"info",title:t.title||"",content:t.content||"",buttons:[{text:"确定",ok:t.callback},{text:"取消",href:"javascript:void(0);",style:"btn links fn-ml-10"}]})}}(),h=function(){return function(t){var i=t.id?t.id:"#alertModalLayer";a(i).modalLayer({icon:t.icon||"info",title:t.title||"",content:t.content||"",buttons:[{text:"确定",ok:t.callback}]})}}(),u=function(){return function(t,i){a(t).modal("hide").on("hide.ui.modal",function(){a(this).remove(),"function"==typeof i&&i()})}}();jQuery.successModalLayer=l,jQuery.confirmModalLayer=c,jQuery.alertModalLayer=h,jQuery.closeModalLayer=u,~function(t){function i(t,i,o){this.selector=t,this.next=o,this.opt=i,this.dialog=this.get(t),this.showModal(i)}i.prototype.showModal=function(i){var o=this;i.show=!1,i.content="",i.callback=function(){o.dialog=t(o.selector),o.$dom=t(this),i&&i.url&&(o.originalUrl=i.url,o.init(),"function"==typeof o.next&&o.next.call(o,o.$dom))},o.dialog.modal(i)},i.prototype.init=function(i){var o=this.$dom.find(".modal-body");this.$title=this.$dom.find(".modal-title"),this.$iframe=t("<iframe />"),this.$iframe.attr({src:i||this.originalUrl,width:this.opt.width||"100%",height:this.opt.height||"100%",allowtransparency:"yes",frameborder:"no",scrolling:"no"}).on("load",t.proxy(this.adjustHeight,this)),o.empty().append(this.$iframe)},i.prototype.setProp=function(t){t.title&&this.$title.html(t.title),t.url&&(this.$iframe[0].src=t.url)},i.prototype.setUrl=function(t){return this.init(t),!0},i.prototype.adjustHeight=function(){var t,i;try{t=this.$iframe[0].contentWindow.frameElement}catch(o){}t&&(i=this.$iframe.contents().height(),this.$iframe.css({height:i+"px"}))},i.prototype.show=function(){this.dialog.modal("show")},i.prototype.hide=function(){this.dialog.modal("hide")},i.get=i.prototype.get=function(i){if(i&&i.frameElement){var o,e=i.frameElement,n=t(".modal-background",i.parent.document);return n.each(function(i,n){var a=t(n).find("iframe");a[0]===e&&(o=t(n))}),o}return t(i)},i.close=function(o){var e=i.get(o);t(e).find(".modal-close").trigger("click"),t(e).remove()},i.adjustHeight=function(o){var e,n,a=i.get(o),s=t(a).find("iframe");try{e=s[0].contentWindow.frameElement}catch(r){}e&&(n=s.contents().height(),s.css({height:n+"px"}))},t.fn.iframeModal=function(o,e){var n=t(this),a=t(this).selector;if((this[0]===window||this[0]===parent)&&"hide"==o)return void i.close(window);if(this[0]===window&&"adjustHeight"==o)return void i.adjustHeight(window);var s=n.data("ui.iframeModal");s?o&&o.url&&o.reset?s&&s.setUrl(o.url)&&s.show():(t.isPlainObject(o)&&s.setProp(o),s&&s.show()):s=new i(a,o,function(i){t(i).data("ui.iframeModal",this)}),"string"==typeof o&&s[o]&&s[o](e)},t(function(){t(document).on("click",'[data-toggle="iframeModal"]',function(i){i.preventDefault();var o=t(this).attr("data-title")||"提示",e=t(this).attr("data-url");e&&o&&t("#iframe-modal").iframeModal({title:o,url:e})})})}(jQuery)},function(i,o){i.exports=t}])});